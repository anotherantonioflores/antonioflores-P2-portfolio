<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Antonio Flores">
<meta name="dcterms.date" content="2024-07-02">

<title>Antonio Flores - Data Analysis Portfolio - Data Processing &amp; Cleaning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Antonio Flores - Data Analysis Portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../aboutme.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="../../starter-analysis-exercise/products/report/starter-analysis-report.html" rel="" target="">
 <span class="dropdown-text">Starter Analysis Exercise</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../coding-exercise/coding-exercise.html" rel="" target="">
 <span class="dropdown-text">R Coding Exercise</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../presentation-exercise/presentation-exercise.html" rel="" target="">
 <span class="dropdown-text">Presentation Exercise</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../tidytuesday-exercise/tidytuesday-exercise.html" rel="" target="">
 <span class="dropdown-text">Tidy Tuesday Exercise</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../synthetic-data-exercise/Synthetic_Data.html" rel="" target="">
 <span class="dropdown-text">Synthetic Data Exercise</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../cdcdata-exercise/code/cdcdata-exercise.html" rel="" target="">
 <span class="dropdown-text">Data Analysis Exercise</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/anotherantonioflores/antonioflores-P2-portfolio" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Processing &amp; Cleaning</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Antonio Flores </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 2, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)<span class="co"># For simplifying data cleaning</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here) <span class="co">#For reading in data from absolute path</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at C:/Users/crew_/OneDrive/Escritorio/Guille/UTSA Masters/MSDA/DA6833/PracticumII-Course/Assignment 5/antonioflores-P2-portfolio</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)<span class="co"># For Piping data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># EDA Charts/Graphs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.3.3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Reading in the Data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>datalocation <span class="ot">=</span> <span class="fu">here</span>(<span class="st">"cdcdata-exercise"</span>, <span class="st">"data"</span>, <span class="st">"Center_for_Medicare___Medicaid_Services__CMS____Medicare_Claims_data_20240701.csv"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">read.csv</span>(datalocation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The dataset comes from the CDC’s data repository and can be accessed with this link. Options exist for exporting via CSV or through the use of an API.</p>
<p><a href="https://data.cdc.gov/Heart-Disease-Stroke-Prevention/Center-for-Medicare-Medicaid-Services-CMS-Medicare/iw6q-r3ja/about_data">Heart Disease Stroke Prevention</a></p>
<p>The Center for Medicare &amp; Medicaid Services (CMS) gathers large amounts of health data from Medicare/Medicaid patients. From this data source, indicators have been computed by the CDC’s Division of Heart Disease and Stroke Prevention (DHDSP), and that is the dataset that will be used for this activity.</p>
<p>Before Cleaning: Each row contains a single data value for a particular category of a demographic (which is one of Race, Gender, Age) for each topic (Heart Failure, Stroke, etc), for each state, for each year(2016-2021).</p>
<p>In other words, for each year, there is a row for each state, for each state there is a row for each topic (5), for every topic there is a row for either percentage or rate, for each of these rows, there is a row for either gender, age, or race, and for each demographic there is one row per option (Male, Female, over75, etc.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   33454 obs. of  30 variables:
 $ RowId                     : logi  NA NA NA NA NA NA ...
 $ YearStart                 : int  2016 2017 2018 2019 2020 2021 2017 2021 2019 2018 ...
 $ LocationAbbr              : chr  "US" "US" "US" "US" ...
 $ LocationDesc              : chr  "United States" "United States" "United States" "United States" ...
 $ DataSource                : chr  "Medicare" "Medicare" "Medicare" "Medicare" ...
 $ PriorityArea1             : chr  "None" "None" "None" "None" ...
 $ PriorityArea2             : logi  NA NA NA NA NA NA ...
 $ PriorityArea3             : chr  "None" "None" "None" "None" ...
 $ PriorityArea4             : logi  NA NA NA NA NA NA ...
 $ Class                     : chr  "Cardiovascular Diseases" "Cardiovascular Diseases" "Cardiovascular Diseases" "Cardiovascular Diseases" ...
 $ Topic                     : chr  "Major Cardiovascular Disease" "Major Cardiovascular Disease" "Major Cardiovascular Disease" "Major Cardiovascular Disease" ...
 $ Question                  : chr  "Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare" "Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare" "Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare" "Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare" ...
 $ Data_Value_Type           : chr  "Crude" "Crude" "Crude" "Crude" ...
 $ Data_Value_Unit           : chr  "Rate per 100,000" "Rate per 100,000" "Rate per 100,000" "Rate per 100,000" ...
 $ Data_Value                : num  2368 2404 2482 5395 4505 ...
 $ Data_Value_Alt            : num  2368 2404 2482 5395 4505 ...
 $ Data_Value_Footnote_Symbol: logi  NA NA NA NA NA NA ...
 $ Data_Value_Footnote       : logi  NA NA NA NA NA NA ...
 $ Low_Confidence_Limit      : num  2318 2358 2439 5382 4493 ...
 $ High_Confidence_Limit     : num  2418 2450 2526 5408 4518 ...
 $ Break_Out_Category        : chr  "Race" "Race" "Race" "Gender" ...
 $ Break_Out                 : chr  "Unknown" "Unknown" "Unknown" "Male" ...
 $ ClassId                   : chr  "C1" "C1" "C1" "C1" ...
 $ TopicId                   : chr  "T1" "T1" "T1" "T1" ...
 $ QuestionId                : chr  "MD101" "MD101" "MD101" "MD101" ...
 $ Data_Value_TypeID         : chr  "Crude" "Crude" "Crude" "Crude" ...
 $ BreakOutCategoryId        : chr  "BOC04" "BOC04" "BOC04" "BOC02" ...
 $ BreakOutId                : chr  "RAC08" "RAC08" "RAC08" "GEN01" ...
 $ LocationId                : int  59 59 59 59 59 59 59 59 30 59 ...
 $ GeoLocation               : chr  "" "" "" "" ...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  RowId           YearStart    LocationAbbr       LocationDesc      
 Mode:logical   Min.   :2016   Length:33454       Length:33454      
 NA's:33454     1st Qu.:2017   Class :character   Class :character  
                Median :2018   Mode  :character   Mode  :character  
                Mean   :2018                                        
                3rd Qu.:2020                                        
                Max.   :2021                                        
  DataSource        PriorityArea1      PriorityArea2  PriorityArea3     
 Length:33454       Length:33454       Mode:logical   Length:33454      
 Class :character   Class :character   NA's:33454     Class :character  
 Mode  :character   Mode  :character                  Mode  :character  
                                                                        
                                                                        
                                                                        
 PriorityArea4     Class              Topic             Question        
 Mode:logical   Length:33454       Length:33454       Length:33454      
 NA's:33454     Class :character   Class :character   Class :character  
                Mode  :character   Mode  :character   Mode  :character  
                                                                        
                                                                        
                                                                        
 Data_Value_Type    Data_Value_Unit      Data_Value     Data_Value_Alt  
 Length:33454       Length:33454       Min.   :   0.0   Min.   :   0.0  
 Class :character   Class :character   1st Qu.:   5.1   1st Qu.:   5.1  
 Mode  :character   Mode  :character   Median :  25.0   Median :  25.0  
                                       Mean   : 845.1   Mean   : 845.1  
                                       3rd Qu.: 965.5   3rd Qu.: 965.5  
                                       Max.   :8118.2   Max.   :8118.2  
 Data_Value_Footnote_Symbol Data_Value_Footnote Low_Confidence_Limit
 Mode:logical               Mode:logical        Min.   :  -1.0      
 NA's:33454                 NA's:33454          1st Qu.:   3.5      
                                                Median :   8.3      
                                                Mean   : 742.4      
                                                3rd Qu.: 825.9      
                                                Max.   :7925.8      
 High_Confidence_Limit Break_Out_Category  Break_Out           ClassId         
 Min.   :   -1.0       Length:33454       Length:33454       Length:33454      
 1st Qu.:    7.2       Class :character   Class :character   Class :character  
 Median :   92.5       Mode  :character   Mode  :character   Mode  :character  
 Mean   : 1027.8                                                               
 3rd Qu.: 1212.2                                                               
 Max.   :18238.6                                                               
   TopicId           QuestionId        Data_Value_TypeID  BreakOutCategoryId
 Length:33454       Length:33454       Length:33454       Length:33454      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
  BreakOutId          LocationId    GeoLocation       
 Length:33454       Min.   : 1.00   Length:33454      
 Class :character   1st Qu.:17.00   Class :character  
 Mode  :character   Median :29.00   Mode  :character  
                    Mean   :29.56                     
                    3rd Qu.:44.00                     
                    Max.   :59.00                     </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  RowId YearStart LocationAbbr  LocationDesc DataSource PriorityArea1
1    NA      2016           US United States   Medicare          None
2    NA      2017           US United States   Medicare          None
3    NA      2018           US United States   Medicare          None
4    NA      2019           US United States   Medicare          None
5    NA      2020           US United States   Medicare          None
6    NA      2021           US United States   Medicare          None
  PriorityArea2 PriorityArea3 PriorityArea4                   Class
1            NA          None            NA Cardiovascular Diseases
2            NA          None            NA Cardiovascular Diseases
3            NA          None            NA Cardiovascular Diseases
4            NA          None            NA Cardiovascular Diseases
5            NA          None            NA Cardiovascular Diseases
6            NA          None            NA Cardiovascular Diseases
                         Topic
1 Major Cardiovascular Disease
2 Major Cardiovascular Disease
3 Major Cardiovascular Disease
4 Major Cardiovascular Disease
5 Major Cardiovascular Disease
6 Major Cardiovascular Disease
                                                                                                            Question
1 Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare
2 Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare
3 Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare
4 Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare
5 Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare
6 Major cardiovascular disease hospitalization rate among Medicare Fee-For-Service beneficiaries (65+); CMS Medicare
  Data_Value_Type  Data_Value_Unit Data_Value Data_Value_Alt
1           Crude Rate per 100,000     2367.6         2367.6
2           Crude Rate per 100,000     2403.7         2403.7
3           Crude Rate per 100,000     2482.3         2482.3
4           Crude Rate per 100,000     5395.0         5395.0
5           Crude Rate per 100,000     4505.4         4505.4
6           Crude Rate per 100,000     4694.6         4694.6
  Data_Value_Footnote_Symbol Data_Value_Footnote Low_Confidence_Limit
1                         NA                  NA               2318.3
2                         NA                  NA               2358.1
3                         NA                  NA               2438.9
4                         NA                  NA               5381.7
5                         NA                  NA               4493.3
6                         NA                  NA               4682.0
  High_Confidence_Limit Break_Out_Category Break_Out ClassId TopicId QuestionId
1                2417.9               Race   Unknown      C1      T1      MD101
2                2450.2               Race   Unknown      C1      T1      MD101
3                2526.4               Race   Unknown      C1      T1      MD101
4                5408.2             Gender      Male      C1      T1      MD101
5                4517.5             Gender      Male      C1      T1      MD101
6                4707.2             Gender      Male      C1      T1      MD101
  Data_Value_TypeID BreakOutCategoryId BreakOutId LocationId GeoLocation
1             Crude              BOC04      RAC08         59            
2             Crude              BOC04      RAC08         59            
3             Crude              BOC04      RAC08         59            
4             Crude              BOC02      GEN01         59            
5             Crude              BOC02      GEN01         59            
6             Crude              BOC02      GEN01         59            </code></pre>
</div>
</div>
<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h2>
<p>First, we’re just changing some fields that were mislabeled (e.g., Arizona Abbreviation was AR), converting categorical variables to factors, and removing useless columns)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="ot">=</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">LocationAbbr =</span><span class="fu">replace</span>(LocationAbbr, LocationDesc<span class="sc">==</span><span class="st">"Arizona"</span>, <span class="st">"AZ"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">LocationAbbr =</span><span class="fu">replace</span>(LocationAbbr, LocationDesc<span class="sc">==</span><span class="st">"Maryland"</span>, <span class="st">"MD"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">LocationAbbr =</span> <span class="fu">as.factor</span>(LocationAbbr)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">LocationDesc =</span> <span class="fu">as.factor</span>(LocationDesc)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DataSource =</span> <span class="fu">as.factor</span>(DataSource)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Class =</span> <span class="fu">as.factor</span>(Class)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Topic =</span> <span class="fu">as.factor</span>(Topic)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Question =</span> <span class="fu">as.factor</span>(Question)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Data_Value_Type =</span> <span class="fu">as.factor</span>(Data_Value_Type)) <span class="sc">%&gt;%</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Data_Value_Unit =</span> <span class="fu">as.factor</span>(Data_Value_Unit)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Data_Value_Unit =</span> <span class="fu">as.factor</span>(Data_Value_Unit)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Break_Out_Category =</span> <span class="fu">as.factor</span>(Break_Out_Category)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Break_Out =</span> <span class="fu">as.factor</span>(Break_Out)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>DataSource) <span class="sc">%&gt;%</span> </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>RowId) <span class="sc">%&gt;%</span> </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>Class) <span class="sc">%&gt;%</span> </span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>Data_Value_Type) <span class="sc">%&gt;%</span> </span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>Data_Value_Footnote_Symbol) <span class="sc">%&gt;%</span> </span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>Data_Value_Footnote) <span class="sc">%&gt;%</span> </span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>ClassId<span class="sc">:</span>GeoLocation) <span class="sc">%&gt;%</span> </span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>PriorityArea1<span class="sc">:</span>PriorityArea4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, in order to better assess the data, I tried to widen out the data so there would only be one line for every topic per state per year.</p>
<p>(There was probably a way more efficient way to do this, but I couldn’t find it)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Breaking into three data frames for each main social demographic</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Using pivot wider to turn demographic options into individual columns</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="do">###Race</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>racedata <span class="ot">=</span> cleaned_data <span class="sc">%&gt;%</span> </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Break_Out_Category<span class="sc">==</span><span class="st">"Race"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(YearStart, LocationAbbr, Data_Value_Unit, Topic, Data_Value, Break_Out_Category, Break_Out)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>longer_race <span class="ot">=</span> racedata <span class="sc">%&gt;%</span> </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Break_Out, <span class="at">values_from =</span> Data_Value) <span class="sc">%&gt;%</span> </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(LocationAbbr,YearStart, Topic, Data_Value_Unit) </span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>longer_race<span class="sc">$</span>ID <span class="ot">=</span> <span class="fu">seq.int</span>(<span class="fu">nrow</span>(longer_race))</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="do">####Gender</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>genderdata <span class="ot">=</span> cleaned_data <span class="sc">%&gt;%</span> </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Break_Out_Category<span class="sc">==</span><span class="st">"Gender"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(YearStart, LocationAbbr, Data_Value_Unit, Topic, Data_Value, Break_Out_Category, Break_Out)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>longer_gender <span class="ot">=</span> genderdata <span class="sc">%&gt;%</span> </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Break_Out, <span class="at">values_from =</span> Data_Value) <span class="sc">%&gt;%</span> </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(LocationAbbr,YearStart, Topic, Data_Value_Unit) </span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>longer_gender<span class="sc">$</span>ID <span class="ot">=</span> <span class="fu">seq.int</span>(<span class="fu">nrow</span>(longer_gender))</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="do">###Age</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>agedata <span class="ot">=</span> cleaned_data <span class="sc">%&gt;%</span> </span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Break_Out_Category<span class="sc">==</span><span class="st">"Age"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(YearStart, LocationAbbr, Data_Value_Unit, Topic, Data_Value, Break_Out_Category, Break_Out)</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>longer_age <span class="ot">=</span> agedata <span class="sc">%&gt;%</span> </span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Break_Out, <span class="at">values_from =</span> Data_Value) <span class="sc">%&gt;%</span> </span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(LocationAbbr,YearStart, Topic, Data_Value_Unit) </span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>longer_age<span class="sc">$</span>ID <span class="ot">=</span> <span class="fu">seq.int</span>(<span class="fu">nrow</span>(longer_age))</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a><span class="do">###Need to join these data frames together</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>all_long1 <span class="ot">=</span> <span class="fu">left_join</span>(longer_race, longer_gender, <span class="at">by =</span> <span class="st">'ID'</span>)</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>all_long <span class="ot">=</span> <span class="fu">left_join</span>(all_long1, longer_age, <span class="at">by =</span> <span class="st">'ID'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Just removing deuplicate columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#selecting only non-duplicate columns</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>clean_all <span class="ot">=</span> all_long <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(YearStart.x<span class="sc">:</span>Topic.x,Unknown<span class="sc">:</span>ID, Male<span class="sc">:</span>Female,<span class="st">`</span><span class="at">75+</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Trying to widen out the data some more with percent and rate data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>percent_date <span class="ot">=</span> clean_all <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Data_Value_Unit.x <span class="sc">==</span><span class="st">"Percent (%)"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>percent_date<span class="sc">$</span>Second_ID <span class="ot">=</span> <span class="fu">seq.int</span>(<span class="fu">nrow</span>(percent_date))</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>rate_data <span class="ot">=</span> clean_all <span class="sc">%&gt;%</span> </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Data_Value_Unit.x<span class="sc">==</span><span class="st">"Rate per 100,000"</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>rate_data<span class="sc">$</span>Second_ID <span class="ot">=</span> <span class="fu">seq.int</span>(<span class="fu">nrow</span>(rate_data))</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>rate_percent_data <span class="ot">=</span> <span class="fu">left_join</span>(percent_date, rate_data, <span class="at">by =</span> <span class="st">"Second_ID"</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co">#again removing uneeded columns</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>rate_percent_data1 <span class="ot">=</span> rate_percent_data <span class="sc">%&gt;%</span>   </span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(YearStart.x.x<span class="sc">:</span>LocationAbbr.x.x, Topic.x.x<span class="sc">:</span><span class="st">`</span><span class="at">Non-Hispanic Black.x</span><span class="st">`</span>, Male.x<span class="sc">:</span>Second_ID, Unknown.y<span class="sc">:</span><span class="st">`</span><span class="at">Non-Hispanic Black.y</span><span class="st">`</span>, Male.y<span class="sc">:</span><span class="st">`</span><span class="at">75+.y</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, renaming all remaining columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>good_data <span class="ot">=</span> rate_percent_data1 <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Year =</span> YearStart.x.x,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Location =</span> LocationAbbr.x.x,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">Topic =</span> Topic.x.x,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Unknown_pct =</span> Unknown.x,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Non_Hispanic_Asian_pct =</span> <span class="st">`</span><span class="at">Non-Hispanic Asian.x</span><span class="st">`</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Non_Hispanic_White_pct=</span> <span class="st">`</span><span class="at">Non-Hispanic White.x</span><span class="st">`</span>,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">Hispanic_pct =</span> Hispanic.x,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">Other_pct =</span> Other.x,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Non_Hispanic_Black_pct =</span> <span class="st">`</span><span class="at">Non-Hispanic Black.x</span><span class="st">`</span>,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">Male_pct =</span> Male.x,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">Female_pct =</span> Female.x,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">Is75plus_pct =</span> <span class="st">`</span><span class="at">75+.x</span><span class="st">`</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">RowID =</span> Second_ID,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">Unknown_rate =</span> Unknown.y,</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">Non_Hispanic_Asian_rate =</span> <span class="st">`</span><span class="at">Non-Hispanic Asian.y</span><span class="st">`</span>,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">Non_Hispanic_White_rate=</span> <span class="st">`</span><span class="at">Non-Hispanic White.y</span><span class="st">`</span>,</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">Hispanic_rate =</span> Hispanic.y,</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">Other_rate =</span> Other.y,</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">Non_Hispanic_Black_rate =</span> <span class="st">`</span><span class="at">Non-Hispanic Black.y</span><span class="st">`</span>,</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">Male_rate =</span> Male.y,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">Female_rate =</span> Female.y,</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">Is75plus_rate =</span> <span class="st">`</span><span class="at">75+.y</span><span class="st">`</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>         )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>At this time, our data now has the following structure:</p>
<p>There 36 rows for each state/territory (52), consisting of 6 rows per year (6 years), one for each topic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(good_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Year         Location                                           Topic    
 Min.   :2016   AK     :  36   Acute Myocardial Infarction (Heart Attack):312  
 1st Qu.:2017   AL     :  36   Coronary Heart Disease                    :312  
 Median :2018   AR     :  36   Diseases of the Heart (Heart Disease)     :312  
 Mean   :2018   AZ     :  36   Heart Failure                             :312  
 3rd Qu.:2020   CA     :  36   Major Cardiovascular Disease              :312  
 Max.   :2021   CO     :  36   Stroke                                    :312  
                (Other):1656                                                   
  Unknown_pct      Non_Hispanic_Asian_pct Non_Hispanic_White_pct
 Min.   :  0.000   Min.   :  0.000        Min.   : 0.00         
 1st Qu.:  0.000   1st Qu.:  0.000        1st Qu.: 4.40         
 Median :  2.800   Median :  5.850        Median : 5.10         
 Mean   :  3.895   Mean   :  7.006        Mean   : 5.42         
 3rd Qu.:  4.900   3rd Qu.:  9.100        3rd Qu.: 6.30         
 Max.   :100.000   Max.   :100.000        Max.   :13.30         
 NA's   :32        NA's   :86                                   
  Hispanic_pct       Other_pct       Non_Hispanic_Black_pct    Male_pct     
 Min.   :  0.000   Min.   :  0.000   Min.   :  0.000        Min.   : 0.000  
 1st Qu.:  0.000   1st Qu.:  3.400   1st Qu.:  3.000        1st Qu.: 4.400  
 Median :  3.800   Median :  5.700   Median :  5.000        Median : 5.100  
 Mean   :  5.193   Mean   :  6.422   Mean   :  5.273        Mean   : 5.389  
 3rd Qu.:  7.100   3rd Qu.:  8.300   3rd Qu.:  6.400        3rd Qu.: 6.200  
 Max.   :100.000   Max.   :100.000   Max.   :100.000        Max.   :15.700  
 NA's   :138       NA's   :11        NA's   :47                             
   Female_pct      Is75plus_pct        RowID         Unknown_rate   
 Min.   : 0.000   Min.   : 0.000   Min.   :   1.0   Min.   :   0.0  
 1st Qu.: 4.400   1st Qu.: 5.000   1st Qu.: 468.8   1st Qu.: 346.6  
 Median : 5.300   Median : 6.100   Median : 936.5   Median : 555.2  
 Mean   : 5.614   Mean   : 6.395   Mean   : 936.5   Mean   : 937.1  
 3rd Qu.: 6.700   3rd Qu.: 7.500   3rd Qu.:1404.2   3rd Qu.:1669.2  
 Max.   :13.600   Max.   :15.900   Max.   :1872.0   Max.   :3857.4  
                                                                    
 Non_Hispanic_Asian_rate Non_Hispanic_White_rate Hispanic_rate   
 Min.   :   0.0          Min.   :  61.8          Min.   :   0.0  
 1st Qu.: 445.8          1st Qu.: 645.1          1st Qu.: 440.3  
 Median : 817.1          Median : 955.3          Median : 852.6  
 Mean   :1254.5          Mean   :1748.8          Mean   :1423.6  
 3rd Qu.:2054.8          3rd Qu.:3185.7          3rd Qu.:2283.8  
 Max.   :5405.4          Max.   :6083.1          Max.   :7462.7  
                                                                 
   Other_rate     Non_Hispanic_Black_rate   Male_rate       Female_rate    
 Min.   :   0.0   Min.   :   0.0          Min.   :  53.1   Min.   :  45.8  
 1st Qu.: 610.3   1st Qu.: 607.8          1st Qu.: 784.3   1st Qu.: 497.6  
 Median : 955.4   Median :1177.4          Median :1125.1   Median : 835.8  
 Mean   :1639.8   Mean   :2005.0          Mean   :2006.4   Mean   :1553.9  
 3rd Qu.:2716.2   3rd Qu.:3533.8          3rd Qu.:3618.7   3rd Qu.:2821.6  
 Max.   :6491.8   Max.   :7679.1          Max.   :6436.4   Max.   :5799.6  
                                                                           
 Is75plus_rate 
 Min.   :  77  
 1st Qu.: 829  
 Median :1309  
 Mean   :2449  
 3rd Qu.:4524  
 Max.   :8118  
               </code></pre>
</div>
</div>
</section>
<section id="exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<p>The main variables I am exploring here are 1) Location 2) Year 3) Topic 4) Hispanic_pct 5) Hispanic_rate (Rate per 100,000)</p>
<section id="hispanic-rate-over-time-colored-by-topic" class="level3">
<h3 class="anchored" data-anchor-id="hispanic-rate-over-time-colored-by-topic">Hispanic Rate Over Time, colored by Topic</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>  good_data <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">y=</span>Hispanic_rate, <span class="at">color =</span> Topic)) <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="hispanic-rate-boxplot" class="level4">
<h4 class="anchored" data-anchor-id="hispanic-rate-boxplot">Hispanic Rate Boxplot</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(good_data<span class="sc">$</span>Hispanic_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="exploring-the-quartiles-for-hispanic-ratepercentage" class="level3">
<h3 class="anchored" data-anchor-id="exploring-the-quartiles-for-hispanic-ratepercentage">Exploring the Quartiles for Hispanic Rate/Percentage</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(good_data<span class="sc">$</span>Hispanic_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    0.0   440.3   852.6  1423.6  2283.8  7462.7 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(good_data<span class="sc">$</span>Hispanic_pct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  0.000   0.000   3.800   5.193   7.100 100.000     138 </code></pre>
</div>
</div>
</section>
<section id="hispanic-rate-distributions-across-different-topics" class="level3">
<h3 class="anchored" data-anchor-id="hispanic-rate-distributions-across-different-topics">Hispanic Rate Distributions across Different Topics</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(good_data, <span class="fu">aes</span>(Hispanic_rate))<span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(.<span class="sc">~</span>Topic)<span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="hispanic-rate-distributions-across-years" class="level3">
<h3 class="anchored" data-anchor-id="hispanic-rate-distributions-across-years">Hispanic Rate Distributions across Years</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>good_data)<span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">mapping =</span><span class="fu">aes</span>(Hispanic_rate))<span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(.<span class="sc">~</span>Year)<span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mean-hispanic-rate-across-topic" class="level3">
<h3 class="anchored" data-anchor-id="mean-hispanic-rate-across-topic">Mean Hispanic Rate across Topic</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>good_data <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Topic) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Hispanic_rate, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(Topic, Mean), <span class="at">y=</span>Mean))<span class="sc">+</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)<span class="sc">+</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mean-hispanic-percent-across-the-topic" class="level3">
<h3 class="anchored" data-anchor-id="mean-hispanic-percent-across-the-topic">Mean Hispanic Percent across the Topic</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>good_data <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Topic) <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Hispanic_pct, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(Topic, Mean), <span class="at">y=</span>Mean))<span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)<span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="hispanic-rate-across-location-colored-by-topic" class="level3">
<h3 class="anchored" data-anchor-id="hispanic-rate-across-location-colored-by-topic">Hispanic Rate across Location, colored by Topic</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>good_data <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Location, Topic) <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Hispanic_rate, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(Location, Mean), <span class="at">y=</span>Mean, <span class="at">fill=</span>Topic))<span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)<span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Location'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="this-section-contributed-by-guillermo-gallardo" class="level1">
<h1>This Section Contributed by Guillermo Gallardo</h1>
<p>To create synthetic data for this project, I first reviewed the data cleaning process from my teammate to understand the desired structure of the dataset. After gaining a clear understanding of the necessary attributes and their relationships, I created the following prompt to guide the generation of the synthetic data:</p>
<p><em>Generate a synthetic dataset in R that mimics health data across U.S. states from 2016 to 2021. Include variables such as Year, Location, Topic (with options like ‘Heart Attack’, ‘Coronary Heart Disease’, ‘Heart Disease’, ‘Heart Failure’, ‘Cardiovascular Disease’), Unknown_pct, Non_Hispanic_Asian_pct, Non_Hispanic_White_pct, Hispanic_pct, Other_pct, Non_Hispanic_Black_pct, Male_pct, Female_pct, Is75plus_pct, RowID, Unknown_rate, Non_Hispanic_Asian_rate, Non_Hispanic_White_rate, Hispanic_rate, Other_rate, Non_Hispanic_Black_rate, Male_rate, Female_rate, and Is75plus_rate. Ensure variability in percentages and rates, introduce missing values, and simulate realistic distributions.</em></p>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p>The code above was used as the foundation for creating the dataset structure. While it successfully created a good dataset, aligning the data in the variables with Antonio’s cleaned dataset was a challenge. At first, all data followed a normal distribution, but after several updates, I managed to update the distributions slightly, but it was a complex task. I think it’s quite challenging to gather all the required data in a single prompt. I also had to specify the exact variables I needed in the dataset, as it was the most straightforward way to ensure the dataset matched the original requirements.</p>
</section>
<section id="synthetic-data" class="level2">
<h2 class="anchored" data-anchor-id="synthetic-data">Synthetic Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) <span class="co"># For reproducibility</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to introduce missing values randomly</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>introduce_na <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na_rate =</span> <span class="fl">0.05</span>) {</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  na_indices <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x), <span class="at">size =</span> <span class="fu">floor</span>(na_rate <span class="sc">*</span> <span class="fu">length</span>(x)))</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  x[na_indices] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to generate synthetic data with variability</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>generate_synthetic_data <span class="ot">=</span> <span class="cf">function</span>(n) {</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>  synthetic_data <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Year =</span> <span class="fu">sample</span>(<span class="dv">2016</span><span class="sc">:</span><span class="dv">2021</span>, n, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Location =</span> <span class="fu">sample</span>(state.abb, n, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Topic =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Heart Attack"</span>, <span class="st">"Coronary Heart Disease"</span>, <span class="st">"Heart Disease"</span>,</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"Heart Failure"</span>, <span class="st">"Cardiovascular Disease"</span>), n, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">Unknown_pct =</span> <span class="fu">introduce_na</span>(<span class="fu">rbeta</span>(n, <span class="fl">2.5</span>, <span class="dv">1</span>)),</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">Non_Hispanic_Asian_pct =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">7</span>, <span class="dv">2</span>)),</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Non_Hispanic_White_pct =</span> <span class="fu">introduce_na</span>(<span class="fu">runif</span>(n, <span class="dv">0</span>, <span class="dv">13</span>)),</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hispanic_pct =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">5</span>, <span class="dv">3</span>)),</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">Other_pct =</span> <span class="fu">introduce_na</span>(<span class="fu">rbeta</span>(n, <span class="dv">3</span>, <span class="dv">2</span>)),</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Non_Hispanic_Black_pct =</span> <span class="fu">introduce_na</span>(<span class="fu">runif</span>(n, <span class="dv">0</span>, <span class="dv">10</span>)),</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">Male_pct =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="fl">5.5</span>, <span class="dv">2</span>)),</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">Female_pct =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="fl">5.8</span>, <span class="dv">2</span>)),</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">Is75plus_pct =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">6</span>, <span class="dv">2</span>)),</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">RowID =</span> <span class="dv">1</span><span class="sc">:</span>n,</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">Unknown_rate =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">1000</span>, <span class="dv">500</span>)),</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">Non_Hispanic_Asian_rate =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">2000</span>, <span class="dv">1000</span>)),</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">Non_Hispanic_White_rate =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">4000</span>, <span class="dv">2000</span>)),</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">Hispanic_rate =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">3000</span>, <span class="dv">1500</span>)),</span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">Other_rate =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">2000</span>, <span class="dv">1000</span>)),</span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">Non_Hispanic_Black_rate =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">2000</span>, <span class="dv">1000</span>)),</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">Male_rate =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">2000</span>, <span class="dv">1000</span>)),</span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">Female_rate =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">2000</span>, <span class="dv">1000</span>)),</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">Is75plus_rate =</span> <span class="fu">introduce_na</span>(<span class="fu">rnorm</span>(n, <span class="dv">3000</span>, <span class="dv">1500</span>))</span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(synthetic_data)</span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate synthetic data</span></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a>synthetic_data <span class="ot">=</span> <span class="fu">generate_synthetic_data</span>(<span class="dv">1872</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="data-summary" class="level3">
<h3 class="anchored" data-anchor-id="data-summary">Data Summary</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(synthetic_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Year        Location            Topic            Unknown_pct     
 Min.   :2016   Length:1872        Length:1872        Min.   :0.06535  
 1st Qu.:2017   Class :character   Class :character   1st Qu.:0.56720  
 Median :2018   Mode  :character   Mode  :character   Median :0.75316  
 Mean   :2018                                         Mean   :0.71064  
 3rd Qu.:2020                                         3rd Qu.:0.88846  
 Max.   :2021                                         Max.   :0.99992  
                                                      NA's   :93       
 Non_Hispanic_Asian_pct Non_Hispanic_White_pct  Hispanic_pct   
 Min.   :-0.2425        Min.   : 0.00341       Min.   :-5.206  
 1st Qu.: 5.5692        1st Qu.: 3.19969       1st Qu.: 3.063  
 Median : 6.8736        Median : 6.69446       Median : 4.897  
 Mean   : 6.9321        Mean   : 6.60234       Mean   : 4.974  
 3rd Qu.: 8.3442        3rd Qu.: 9.90352       3rd Qu.: 6.992  
 Max.   :13.0769        Max.   :12.99160       Max.   :14.203  
 NA's   :93             NA's   :93             NA's   :93      
   Other_pct       Non_Hispanic_Black_pct    Male_pct        Female_pct      
 Min.   :0.04734   Min.   :0.01301        Min.   :-1.194   Min.   : 0.06137  
 1st Qu.:0.46185   1st Qu.:2.43752        1st Qu.: 4.173   1st Qu.: 4.42554  
 Median :0.61494   Median :4.85954        Median : 5.477   Median : 5.72194  
 Mean   :0.60308   Mean   :4.95143        Mean   : 5.509   Mean   : 5.75788  
 3rd Qu.:0.75973   3rd Qu.:7.51951        3rd Qu.: 6.831   3rd Qu.: 7.02938  
 Max.   :0.99114   Max.   :9.99040        Max.   :12.127   Max.   :11.45625  
 NA's   :93        NA's   :93             NA's   :93       NA's   :93        
  Is75plus_pct        RowID         Unknown_rate    Non_Hispanic_Asian_rate
 Min.   :-1.341   Min.   :   1.0   Min.   :-485.4   Min.   :-1280          
 1st Qu.: 4.653   1st Qu.: 468.8   1st Qu.: 669.1   1st Qu.: 1293          
 Median : 6.019   Median : 936.5   Median :1005.6   Median : 1974          
 Mean   : 6.011   Mean   : 936.5   Mean   : 999.2   Mean   : 1981          
 3rd Qu.: 7.313   3rd Qu.:1404.2   3rd Qu.:1331.0   3rd Qu.: 2677          
 Max.   :13.719   Max.   :1872.0   Max.   :2960.7   Max.   : 6323          
 NA's   :93                        NA's   :93       NA's   :93             
 Non_Hispanic_White_rate Hispanic_rate     Other_rate   
 Min.   :-2716           Min.   :-2190   Min.   :-1497  
 1st Qu.: 2612           1st Qu.: 2063   1st Qu.: 1331  
 Median : 3965           Median : 3117   Median : 2014  
 Mean   : 4002           Mean   : 3091   Mean   : 2004  
 3rd Qu.: 5358           3rd Qu.: 4057   3rd Qu.: 2682  
 Max.   :10271           Max.   : 7914   Max.   : 5250  
 NA's   :93              NA's   :93      NA's   :93     
 Non_Hispanic_Black_rate   Male_rate       Female_rate   Is75plus_rate  
 Min.   :-1473           Min.   :-979.1   Min.   :-751   Min.   :-1937  
 1st Qu.: 1361           1st Qu.:1362.0   1st Qu.:1313   1st Qu.: 1997  
 Median : 1996           Median :2041.3   Median :2005   Median : 2956  
 Mean   : 2000           Mean   :2009.1   Mean   :2004   Mean   : 3002  
 3rd Qu.: 2675           3rd Qu.:2681.6   3rd Qu.:2704   3rd Qu.: 4014  
 Max.   : 5521           Max.   :5982.8   Max.   :5068   Max.   : 8713  
 NA's   :93              NA's   :93       NA's   :93     NA's   :93     </code></pre>
</div>
</div>
</section>
<section id="hispanic-rate-over-time-colored-by-topic-1" class="level3">
<h3 class="anchored" data-anchor-id="hispanic-rate-over-time-colored-by-topic-1">Hispanic Rate Over Time, colored by Topic</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>synthetic_data <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Year, <span class="at">y=</span>Hispanic_rate, <span class="at">color =</span> Topic)) <span class="sc">+</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">unique</span>(synthetic_data<span class="sc">$</span>Year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 93 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="hispanic-rate-boxplot-1" class="level3">
<h3 class="anchored" data-anchor-id="hispanic-rate-boxplot-1">Hispanic Rate Boxplot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(synthetic_data<span class="sc">$</span>Hispanic_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="exploring-the-quartiles-for-hispanic-ratepercentage-1" class="level3">
<h3 class="anchored" data-anchor-id="exploring-the-quartiles-for-hispanic-ratepercentage-1">Exploring the Quartiles for Hispanic Rate/Percentage</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(synthetic_data<span class="sc">$</span>Hispanic_rate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  -2190    2063    3117    3091    4057    7914      93 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(synthetic_data<span class="sc">$</span>Hispanic_pct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
 -5.206   3.063   4.897   4.974   6.992  14.203      93 </code></pre>
</div>
</div>
</section>
<section id="hispanic-rate-distributions-across-different-topics-1" class="level3">
<h3 class="anchored" data-anchor-id="hispanic-rate-distributions-across-different-topics-1">Hispanic Rate Distributions across Different Topics</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(synthetic_data, <span class="fu">aes</span>(Hispanic_rate))<span class="sc">+</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(.<span class="sc">~</span>Topic)<span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 93 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mean-hispanic-rate-across-topic-1" class="level3">
<h3 class="anchored" data-anchor-id="mean-hispanic-rate-across-topic-1">Mean Hispanic Rate across Topic</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>synthetic_data <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Topic) <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Hispanic_rate, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(Topic, Mean), <span class="at">y=</span>Mean))<span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)<span class="sc">+</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mean-hispanic-percent-across-the-topic-1" class="level3">
<h3 class="anchored" data-anchor-id="mean-hispanic-percent-across-the-topic-1">Mean Hispanic Percent across the Topic</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>synthetic_data <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Topic) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Hispanic_pct, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(Topic, Mean), <span class="at">y=</span>Mean))<span class="sc">+</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)<span class="sc">+</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="hispanic-rate-across-location-colored-by-topic-1" class="level3">
<h3 class="anchored" data-anchor-id="hispanic-rate-across-location-colored-by-topic-1">Hispanic Rate across Location, colored by Topic</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>synthetic_data <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Location, Topic) <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Mean =</span> <span class="fu">mean</span>(Hispanic_rate, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(Location, Mean), <span class="at">y=</span>Mean, <span class="at">fill=</span>Topic))<span class="sc">+</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)<span class="sc">+</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Location'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cdcdata-exercise_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="conclusion-1" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-1">Conclusion</h2>
<p>The data variables and observations are the exact amount as my teammate’s file but the actual content is not close to what Antonio found in the CDC’s website. Fro me</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>